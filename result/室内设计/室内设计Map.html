<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=IkE8Vh4DQ86PfCXajy1Q0hoDYqHElBco"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js"></script>
    <title>热力图功能示例</title>
    <style type="text/css">
		ul,li{list-style: none;margin:0;padding:0;float:left;}
		html{height:100%}
		body{height:100%;margin:0px;padding:0px;font-family:"微软雅黑";}
		#container{height:700px;width:100%;}
		#r-result{width:100%;}
    </style>
</head>
<body>
	<div id="container"></div>
	<div id="r-result">
		<input type="button"  onclick="openHeatmap();" value="显示热力图"/><input type="button"  onclick="closeHeatmap();" value="关闭热力图"/>
	</div>
</body>
</html>
<script type="text/javascript">
    var map = new BMap.Map("container");          // 创建地图实例

    var point = new BMap.Point(116.418261, 39.921984);
    map.centerAndZoom(point, 15);             // 初始化地图，设置中心点坐标和地图级别
    map.enableScrollWheelZoom(); // 允许滚轮缩放
    //这里如何使用上面函数获取的json数据
    var points =[{"lng": 112.99135026768174, "lat": 28.154713731158136, "count": 1}, {"lng": 113.27586553945561, "lat": 23.074708896888954, "count": 1}, {"lng": 120.1295136737584, "lat": 30.334715402474227, "count": 1}, {"lng": 113.30031860478563, "lat": 23.22558427696618, "count": 1}, {"lng": 116.50918744077893, "lat": 40.00520129930891, "count": 1}, {"lng": 120.67688522903795, "lat": 31.278483968057976, "count": 1}, {"lng": 113.7080112503753, "lat": 34.797406405145374, "count": 1}, {"lng": 121.39528369803948, "lat": 31.24138945368617, "count": 1}, {"lng": 121.38500543910627, "lat": 31.238994927922445, "count": 1}, {"lng": 121.61102625143704, "lat": 38.90734848099469, "count": 1}, {"lng": 114.16430066851858, "lat": 22.61090238806344, "count": 1}, {"lng": 117.08092359447336, "lat": 36.679759325890345, "count": 1}, {"lng": 121.45466400769092, "lat": 31.29963818116114, "count": 1}, {"lng": 114.03044865604852, "lat": 22.535968994683973, "count": 1}, {"lng": 116.37663204243778, "lat": 40.009004098561824, "count": 1}, {"lng": 121.45466400769092, "lat": 31.29963818116114, "count": 1}, {"lng": 108.96625890407014, "lat": 34.255484557670755, "count": 1}, {"lng": 114.34190563406993, "lat": 34.79798254608418, "count": 1}, {"lng": 116.460022551404, "lat": 39.923412008046725, "count": 1}, {"lng": 113.0248857838166, "lat": 28.186597644072684, "count": 1}, {"lng": 106.94500780614018, "lat": 27.708656745733578, "count": 1}, {"lng": 120.71661395272717, "lat": 27.986609153204004, "count": 1}, {"lng": 113.96327628413763, "lat": 22.57864018813203, "count": 1}, {"lng": 123.40608822798171, "lat": 41.791059289927716, "count": 1}, {"lng": 116.41497310229921, "lat": 39.974375429947436, "count": 1}, {"lng": 117.70274845492919, "lat": 39.012060756671204, "count": 1}, {"lng": 114.09438535936101, "lat": 22.553269872544437, "count": 1}, {"lng": 120.60724259510502, "lat": 31.22523551942269, "count": 1}, {"lng": 113.2956903479522, "lat": 23.143396895523633, "count": 1}, {"lng": 129.25191896483955, "lat": 48.298020306125046, "count": 1}, {"lng": 103.95686110225573, "lat": 30.601439584185734, "count": 1}, {"lng": 104.03168184043645, "lat": 30.62123923649797, "count": 1}, {"lng": 114.0674843091103, "lat": 22.611405868659805, "count": 1}, {"lng": 121.44251424549877, "lat": 31.34603096691292, "count": 1}, {"lng": 103.91771317180896, "lat": 30.609889835825847, "count": 1}, {"lng": 116.18248024490474, "lat": 39.93215733962026, "count": 1}, {"lng": 114.07353138829284, "lat": 22.577077778083954, "count": 1}, {"lng": 116.49983769737, "lat": 39.992456263404684, "count": 1}, {"lng": 117.19236624776951, "lat": 39.09295026447234, "count": 1}, {"lng": 120.43791227686413, "lat": 36.32667420553057, "count": 1}, {"lng": 113.3078373311728, "lat": 23.14906844488874, "count": 1}, {"lng": 120.37860033685536, "lat": 31.58562466883967, "count": 1}, {"lng": 108.33118402446874, "lat": 22.79104271720259, "count": 1}, {"lng": 113.40806746771007, "lat": 23.11534245237377, "count": 1}, {"lng": 113.75233953503384, "lat": 23.0191485987967, "count": 1}, {"lng": 114.02957546626259, "lat": 22.540723872754068, "count": 1}, {"lng": 110.64982777382495, "lat": 26.042030662743024, "count": 1}, {"lng": 118.74220393984217, "lat": 32.04080947080564, "count": 1}, {"lng": 113.35149569758772, "lat": 23.1173592724673, "count": 1}, {"lng": 121.26389122355391, "lat": 31.398573863707863, "count": 1}, {"lng": 118.35098197025903, "lat": 35.073750570909944, "count": 1}, {"lng": 114.35362228468497, "lat": 30.56486029278519, "count": 1}, {"lng": 108.86237103963836, "lat": 34.188729340497474, "count": 1}, {"lng": 118.14512933927529, "lat": 24.52183218778384, "count": 1}, {"lng": 120.13460501966001, "lat": 30.32579504042346, "count": 1}, {"lng": 121.38184342706708, "lat": 37.47918701585276, "count": 1}, {"lng": 117.26376020644672, "lat": 31.861124201786062, "count": 1}, {"lng": 121.50064205625212, "lat": 31.342395644102872, "count": 1}, {"lng": 113.66785191955145, "lat": 34.81755365758079, "count": 1}, {"lng": 113.61791739141275, "lat": 23.125801324179665, "count": 1}, {"lng": 108.74727433195147, "lat": 34.355496132625866, "count": 1}, {"lng": 113.93445156563794, "lat": 22.55193187458334, "count": 1}, {"lng": 117.06530157028173, "lat": 36.66082729152397, "count": 1}, {"lng": 116.49983769737, "lat": 39.992456263404684, "count": 1}, {"lng": 121.5220170023026, "lat": 30.92608417878207, "count": 1}, {"lng": 116.11595202018196, "lat": 24.29075035490101, "count": 1}, {"lng": 108.95264222116678, "lat": 34.256488243764224, "count": 1}, {"lng": 113.37689905875709, "lat": 22.98548726248273, "count": 1}, {"lng": 116.4660869220713, "lat": 39.911570825193344, "count": 1}, {"lng": 120.54566989051757, "lat": 31.26333196177279, "count": 1}, {"lng": 121.55085785869782, "lat": 29.812151682529827, "count": 1}, {"lng": 113.35375331899465, "lat": 22.914491524358553, "count": 1}, {"lng": 115.68073770747888, "lat": 37.74033452702447, "count": 1}, {"lng": 113.61791739141275, "lat": 23.125801324179665, "count": 1}, {"lng": 111.68436345072632, "lat": 40.785662209333985, "count": 1}, {"lng": 113.09649905208246, "lat": 22.95680087605526, "count": 1}, {"lng": 113.35375331899465, "lat": 22.914491524358553, "count": 1}, {"lng": 114.16421303881611, "lat": 22.610992718355025, "count": 1}, {"lng": 121.419040243336, "lat": 31.17641115197749, "count": 1}, {"lng": 113.56146780131995, "lat": 22.286196960025435, "count": 1}, {"lng": 120.07271500392237, "lat": 30.14180965031683, "count": 1}, {"lng": 121.47390469432422, "lat": 31.312354866049326, "count": 1}, {"lng": 120.21828383977966, "lat": 30.302391636351746, "count": 1}, {"lng": 120.5155133243152, "lat": 36.871309748228306, "count": 1}, {"lng": 104.05037046224919, "lat": 30.698559324411768, "count": 1}, {"lng": 114.1844730318509, "lat": 30.522334366016445, "count": 1}, {"lng": 116.41837198762, "lat": 40.104350517334126, "count": 1}, {"lng": 121.53334134788358, "lat": 38.86262733568833, "count": 1}, {"lng": 116.52169489108084, "lat": 39.95895316640668, "count": 1}, {"lng": 106.56369463244135, "lat": 29.66848433244641, "count": 1}, {"lng": 120.24850182100805, "lat": 31.46657856503107, "count": 1}, {"lng": 114.11330296642846, "lat": 22.56157451296218, "count": 1}, {"lng": 121.61102625143704, "lat": 38.90734848099469, "count": 1}, {"lng": 112.98520997313307, "lat": 22.953392112935482, "count": 1}, {"lng": 106.55609972884865, "lat": 29.57148371984414, "count": 1}, {"lng": 114.58638255261188, "lat": 38.014621045711564, "count": 1}, {"lng": 113.41756300011146, "lat": 23.150909011428485, "count": 1}, {"lng": 116.37395605769647, "lat": 39.907872754371375, "count": 1}, {"lng": 114.16401423482375, "lat": 22.610886321442745, "count": 1}, {"lng": 108.96322249670061, "lat": 34.200301552664136, "count": 1}, {"lng": 119.95348992126429, "lat": 31.775946498722263, "count": 1}, {"lng": 108.92864759526603, "lat": 34.18858337690016, "count": 1}, {"lng": 117.29537899465144, "lat": 31.815579585745287, "count": 1}, {"lng": 117.12756262841536, "lat": 36.68934465709829, "count": 1}, {"lng": 118.5797786758823, "lat": 24.823082426528764, "count": 1}, {"lng": 113.77437528658675, "lat": 34.77591010223832, "count": 1}, {"lng": 106.75379853119536, "lat": 29.816264082426493, "count": 1}, {"lng": 121.34285949486743, "lat": 31.297632168499874, "count": 1}, {"lng": 116.49688624454913, "lat": 39.99234321426825, "count": 1}, {"lng": 113.99934186336763, "lat": 22.546109372381725, "count": 1}, {"lng": 120.45363760259619, "lat": 36.11622894757573, "count": 1}, {"lng": 120.2598306941925, "lat": 30.21932560651063, "count": 1}, {"lng": 104.0791758420374, "lat": 30.67306430881916, "count": 1}, {"lng": 113.10163063578109, "lat": 23.008141229862602, "count": 1}, {"lng": 118.74516651278695, "lat": 32.03229358099037, "count": 1}, {"lng": 112.55525405723532, "lat": 37.82468509910454, "count": 1}, {"lng": 118.3528189690947, "lat": 35.13475533899322, "count": 1}, {"lng": 126.36841846875294, "lat": 45.68613924393256, "count": 1}, {"lng": 116.25500255435337, "lat": 40.0800959304039, "count": 1}, {"lng": 121.53334134788358, "lat": 38.86262733568833, "count": 1}, {"lng": 121.52829852664898, "lat": 38.95680433528163, "count": 1}, {"lng": 113.9989798570269, "lat": 22.54507287691616, "count": 1}, {"lng": 113.09819093505229, "lat": 22.961806724015844, "count": 1}, {"lng": 115.9695988860582, "lat": 28.680370039073033, "count": 1}, {"lng": 114.40581371289845, "lat": 30.502436122093346, "count": 1}, {"lng": 102.11038296235517, "lat": 36.50554986133601, "count": 1}, {"lng": 114.47627346116234, "lat": 23.106885043554712, "count": 1}, {"lng": 116.34021238170621, "lat": 39.99963176122771, "count": 1}, {"lng": 114.12443629542379, "lat": 22.60842063366868, "count": 1}, {"lng": 121.44921535128105, "lat": 31.23603078036556, "count": 1}, {"lng": 121.43170032968486, "lat": 31.189436911541556, "count": 1}, {"lng": 121.5354061929288, "lat": 31.21742167209097, "count": 1}, {"lng": 113.94027590098632, "lat": 22.498676851767588, "count": 1}, {"lng": 121.76225658111558, "lat": 31.123939626323132, "count": 1}, {"lng": 121.43211592623753, "lat": 31.18673323826921, "count": 1}, {"lng": 120.64634835729453, "lat": 31.183927303115574, "count": 1}, {"lng": 113.60020434849513, "lat": 37.87275336678778, "count": 1}, {"lng": 110.36506726285033, "lat": 21.257463103764316, "count": 1}, {"lng": 121.52366375530248, "lat": 31.234870118997737, "count": 1}, {"lng": 114.2752619849973, "lat": 30.58634887390279, "count": 1}, {"lng": 113.22988172956778, "lat": 23.168485921179645, "count": 1}, {"lng": 113.99362948383494, "lat": 22.55305146125205, "count": 1}, {"lng": 116.68173230037965, "lat": 27.51896617645848, "count": 1}, {"lng": 113.63402415767396, "lat": 34.75998288895965, "count": 1}, {"lng": 113.33576048421212, "lat": 23.01273950206189, "count": 1}, {"lng": 116.34021238170621, "lat": 39.99963176122771, "count": 1}, {"lng": 121.47258961548137, "lat": 31.21598724711421, "count": 1}, {"lng": 121.45475555700204, "lat": 31.23538080348789, "count": 1}, {"lng": 121.78096935710137, "lat": 39.06848249939533, "count": 1}, {"lng": 121.39198792830987, "lat": 31.243114673903865, "count": 1}, {"lng": 121.33044912936562, "lat": 37.55491240005068, "count": 1}, {"lng": 116.61157863840056, "lat": 39.91433691090846, "count": 1}, {"lng": 113.38385206557157, "lat": 23.009998610192387, "count": 1}, {"lng": 115.86270309057684, "lat": 28.643883302729996, "count": 1}, {"lng": 116.83109248044772, "lat": 38.29271555945555, "count": 1}, {"lng": 120.44424972522003, "lat": 36.31157108197203, "count": 1}, {"lng": 121.84941584463989, "lat": 29.898554484854085, "count": 1}, {"lng": 121.32046715225059, "lat": 31.2026253798462, "count": 1}, {"lng": 120.33966669808629, "lat": 36.07347672320184, "count": 1}, {"lng": 114.10244051517142, "lat": 22.5422189399269, "count": 1}, {"lng": 116.5313400139772, "lat": 39.92493357085623, "count": 1}, {"lng": 118.8246843557335, "lat": 31.937135897215605, "count": 1}, {"lng": 117.18695922024388, "lat": 39.12447634917127, "count": 1}, {"lng": 116.37319010401802, "lat": 39.93428014370851, "count": 1}, {"lng": 116.18248024490474, "lat": 39.93215733962026, "count": 1}, {"lng": 121.54942543797189, "lat": 31.270880483251283, "count": 1}, {"lng": 118.77955078660584, "lat": 32.07280915949041, "count": 1}, {"lng": 113.998706469423, "lat": 22.543179303061407, "count": 1}, {"lng": 120.21363281808647, "lat": 30.268970935884315, "count": 1}, {"lng": 108.92083123510837, "lat": 34.23825973195953, "count": 1}, {"lng": 116.61157863840056, "lat": 39.91433691090846, "count": 1}, {"lng": 113.33670072891111, "lat": 23.215256509524803, "count": 1}, {"lng": 114.03306011999572, "lat": 22.53412071622266, "count": 1}, {"lng": 114.56329021800265, "lat": 38.0486724562956, "count": 1}, {"lng": 106.47962978932934, "lat": 29.626856401076125, "count": 1}, {"lng": 114.01753578383853, "lat": 22.55375418096794, "count": 1}, {"lng": 121.4734761747485, "lat": 31.298651749216063, "count": 1}, {"lng": 113.99173618010882, "lat": 22.553842203604553, "count": 1}, {"lng": 114.43145215523836, "lat": 30.509697567661554, "count": 1}, {"lng": 113.63924206943209, "lat": 34.71616340792381, "count": 1}, {"lng": 119.39151672486778, "lat": 26.02432055064189, "count": 1}, {"lng": 116.52169489108084, "lat": 39.95895316640668, "count": 1}, {"lng": 104.02749742826921, "lat": 30.667441853733003, "count": 1}, {"lng": 112.55525405723532, "lat": 37.82468509910454, "count": 1}, {"lng": 129.25191896483955, "lat": 48.298020306125046, "count": 1}, {"lng": 121.56855061200827, "lat": 31.241807131481178, "count": 1}, {"lng": 113.77723265717663, "lat": 34.76193444818741, "count": 1}, {"lng": 113.56690100456804, "lat": 22.284918740928497, "count": 1}, {"lng": 113.56146780131995, "lat": 22.286196960025435, "count": 1}, {"lng": 111.69374732615144, "lat": 40.805581421629455, "count": 1}, {"lng": 117.25493076158916, "lat": 39.097746083292385, "count": 1}, {"lng": 109.10204810433193, "lat": 34.289411468076224, "count": 1}, {"lng": 123.34242519791324, "lat": 41.81040249141496, "count": 1}, {"lng": 113.07464720649104, "lat": 36.22318128841756, "count": 1}, {"lng": 108.84813101086364, "lat": 34.24465700610007, "count": 1}, {"lng": 114.04765303910216, "lat": 22.64270688231195, "count": 1}, {"lng": 116.6094625468226, "lat": 39.930331520049165, "count": 1}, {"lng": 118.72197857905098, "lat": 31.954552108797227, "count": 1}, {"lng": 113.03770446779562, "lat": 25.782263975738925, "count": 1}, {"lng": 121.26882526807599, "lat": 31.325067137357006, "count": 1}, {"lng": 113.24951397999024, "lat": 23.102214948557265, "count": 1}, {"lng": 120.27517388884537, "lat": 30.20819775545862, "count": 1}, {"lng": 108.86943468535497, "lat": 34.19699434616774, "count": 1}, {"lng": 120.29619630837306, "lat": 31.499163898521694, "count": 1}, {"lng": 116.40633889695779, "lat": 40.02739890913251, "count": 1}, {"lng": 121.6456089277058, "lat": 38.927676792231715, "count": 1}, {"lng": 114.2752619849973, "lat": 30.58634887390279, "count": 1}, {"lng": 113.99911908360124, "lat": 22.545994382115854, "count": 1}, {"lng": 121.46794052334842, "lat": 31.247548465239305, "count": 1}, {"lng": 120.33966669808629, "lat": 36.07347672320184, "count": 1}, {"lng": 113.0248857838166, "lat": 28.186597644072684, "count": 1}, {"lng": 108.98713157157779, "lat": 34.337641879974754, "count": 1}, {"lng": 121.3872925455957, "lat": 31.23984082029908, "count": 1}, {"lng": 116.49138023453595, "lat": 39.854278963661905, "count": 1}, {"lng": 121.37541396437949, "lat": 31.176634516806807, "count": 1}, {"lng": 106.57465295176067, "lat": 29.513455282340257, "count": 1}, {"lng": 116.44536544566913, "lat": 39.944533453399266, "count": 1}, {"lng": 116.51374598191987, "lat": 39.96436503675531, "count": 1}, {"lng": 120.47557685338839, "lat": 36.0996572508281, "count": 1}, {"lng": 104.07524907287348, "lat": 30.540921812861615, "count": 1}, {"lng": 113.95072266573632, "lat": 22.558887751082636, "count": 1}, {"lng": 113.9989798570269, "lat": 22.54507287691616, "count": 1}, {"lng": 114.38161354212075, "lat": 30.511508526525223, "count": 1}, {"lng": 106.75379853119536, "lat": 29.816264082426493, "count": 1}, {"lng": 117.2048586294627, "lat": 34.23555207538162, "count": 1}, {"lng": 120.47932220616133, "lat": 30.193806239853732, "count": 1}, {"lng": 116.46974697804116, "lat": 39.93971101844249, "count": 1}, {"lng": 113.99404405182766, "lat": 22.55364310860051, "count": 1}, {"lng": 114.28848233484673, "lat": 36.93863545934609, "count": 1}, {"lng": 118.7555692202706, "lat": 31.97600633427555, "count": 1}, {"lng": 118.43705078155257, "lat": 24.80099055035105, "count": 1}, {"lng": 114.04002099955969, "lat": 22.626381605115075, "count": 1}, {"lng": 106.1951280685671, "lat": 38.511626412327324, "count": 1}, {"lng": 116.53759515598905, "lat": 39.92399097478817, "count": 1}, {"lng": 113.94061218884032, "lat": 22.524102386038066, "count": 1}, {"lng": 120.33728075463482, "lat": 31.59195690443734, "count": 1}, {"lng": 106.47962978932934, "lat": 29.626856401076125, "count": 1}, {"lng": 121.419040243336, "lat": 31.17641115197749, "count": 1}, {"lng": 120.8659808529233, "lat": 32.01857356987404, "count": 1}, {"lng": 121.59439005200262, "lat": 31.272383092628107, "count": 1}, {"lng": 113.73808809717214, "lat": 34.75125397880502, "count": 1}, {"lng": 103.99560286296784, "lat": 30.63208018948774, "count": 1}, {"lng": 108.86943468535497, "lat": 34.19699434616774, "count": 1}, {"lng": 113.74237802430457, "lat": 34.7556642280247, "count": 1}, {"lng": 121.43407887379384, "lat": 31.19030113493029, "count": 1}, {"lng": 120.65219827908066, "lat": 31.39859138665515, "count": 1}, {"lng": 116.48047852912116, "lat": 39.95996628538253, "count": 1}, {"lng": 116.4325310170852, "lat": 39.86464733631601, "count": 1}, {"lng": 121.39054946451031, "lat": 31.2266532649577, "count": 1}, {"lng": 113.33201791888241, "lat": 23.2035087709322, "count": 1}, {"lng": 114.04696250267382, "lat": 22.527317370595657, "count": 1}, {"lng": 121.50270688422955, "lat": 31.162092421562555, "count": 1}, {"lng": 116.37319010401802, "lat": 39.93428014370851, "count": 1}, {"lng": 116.37663204243778, "lat": 40.009004098561824, "count": 1}, {"lng": 119.9980890600477, "lat": 30.38811998075376, "count": 1}, {"lng": 113.88554674830057, "lat": 22.5697178541336, "count": 1}, {"lng": 113.99362948383494, "lat": 22.55305146125205, "count": 1}, {"lng": 117.39555948307402, "lat": 39.15885354356491, "count": 1}, {"lng": 121.44417280762288, "lat": 31.225267526753615, "count": 1}, {"lng": 117.19119719387713, "lat": 39.126649910740326, "count": 1}, {"lng": 117.19236624776951, "lat": 39.09295026447234, "count": 1}, {"lng": 120.13460501966001, "lat": 30.32579504042346, "count": 1}, {"lng": 104.0990188556, "lat": 30.65141071220867, "count": 1}, {"lng": 114.11290902712348, "lat": 22.566649914732483, "count": 1}, {"lng": 120.24850182100805, "lat": 31.46657856503107, "count": 1}, {"lng": 114.16430066851858, "lat": 22.61090238806344, "count": 1}, {"lng": 117.11721490531366, "lat": 36.62616094396791, "count": 1}, {"lng": 116.52516280625647, "lat": 39.919068930673234, "count": 1}, {"lng": 104.05037046224919, "lat": 30.698559324411768, "count": 1}, {"lng": 117.05248028750063, "lat": 36.66679986986131, "count": 1}, {"lng": 116.72822904528138, "lat": 40.154951470441354, "count": 1}, {"lng": 121.09142524282201, "lat": 31.130862397996967, "count": 1}, {"lng": 116.4832117413133, "lat": 39.985840413811076, "count": 1}, {"lng": 120.5117845490535, "lat": 36.871021117553674, "count": 1}, {"lng": 114.49361291073748, "lat": 22.776350311215527, "count": 1}, {"lng": 121.45475555700204, "lat": 31.23538080348789, "count": 1}, {"lng": 113.80347112268193, "lat": 34.819064968473725, "count": 1}, {"lng": 120.54477884601103, "lat": 31.276069537559525, "count": 1}, {"lng": 120.21363281808647, "lat": 30.268970935884315, "count": 1}, {"lng": 113.80797630447556, "lat": 34.80026505624881, "count": 1}, {"lng": 116.1853514709588, "lat": 39.91451029351849, "count": 1}, {"lng": 118.79474057257245, "lat": 25.857384057085046, "count": 1}, {"lng": 104.15860569775585, "lat": 30.633125012390458, "count": 1}, {"lng": 119.36537120794056, "lat": 26.029430894958484, "count": 1}, {"lng": 113.76586506537181, "lat": 34.751481035425, "count": 1}, {"lng": 113.99944903121494, "lat": 22.545236178270326, "count": 1}, {"lng": 120.33966669808629, "lat": 36.07347672320184, "count": 1}, {"lng": 108.74727433195147, "lat": 34.355496132625866, "count": 1}, {"lng": 112.56545835867591, "lat": 37.84321226501796, "count": 1}, {"lng": 114.48926082858638, "lat": 38.04629860067482, "count": 1}, {"lng": 121.47256851608154, "lat": 31.23709417570493, "count": 1}, {"lng": 117.00764025317295, "lat": 36.669244414012695, "count": 1}, {"lng": 114.40581371289845, "lat": 30.502436122093346, "count": 1}, {"lng": 120.25221499482474, "lat": 30.245133078215147, "count": 1}, {"lng": 115.04300110057568, "lat": 34.39975982873049, "count": 1}, {"lng": 113.3212454392103, "lat": 23.107161082951084, "count": 1}, {"lng": 119.89998592253023, "lat": 31.814775072749686, "count": 1}, {"lng": 113.34885029745497, "lat": 23.14786725428733, "count": 1}, {"lng": 108.33118402446874, "lat": 22.79104271720259, "count": 1}, {"lng": 106.565444172252, "lat": 29.577301498729557, "count": 1}, {"lng": 106.28713909180046, "lat": 38.46999932049299, "count": 1}, {"lng": 113.98809840211682, "lat": 22.557010393263912, "count": 1}, {"lng": 121.54770646544904, "lat": 31.283456984811618, "count": 1}, {"lng": 113.13015650600383, "lat": 28.230733230122063, "count": 1}, {"lng": 119.29176284535806, "lat": 26.062846566582795, "count": 1}, {"lng": 123.37616239891737, "lat": 41.823495572940374, "count": 1}, {"lng": 117.2616931652718, "lat": 39.12662568466626, "count": 1}, {"lng": 120.58387156031303, "lat": 30.06051912152512, "count": 1}, {"lng": 112.9363120062735, "lat": 28.210420007867313, "count": 1}, {"lng": 121.43550887106399, "lat": 31.191173773864794, "count": 1}, {"lng": 115.86270309057684, "lat": 28.643883302729996, "count": 1}, {"lng": 117.00764025317295, "lat": 36.669244414012695, "count": 1}, {"lng": 113.6605023557673, "lat": 34.771916752035196, "count": 1}, {"lng": 116.5919013729842, "lat": 35.43651924418288, "count": 1}, {"lng": 116.377753576867, "lat": 39.85422853921956, "count": 1}, {"lng": 104.06587238479077, "lat": 30.60699538800951, "count": 1}, {"lng": 118.13532160558498, "lat": 24.494300103027204, "count": 1}, {"lng": 106.5483702590906, "lat": 29.643020236195085, "count": 1}, {"lng": 117.18600257697746, "lat": 39.1436627766964, "count": 1}, {"lng": 121.43170032968486, "lat": 31.189436911541556, "count": 1}, {"lng": 104.07115736313997, "lat": 30.67723653254019, "count": 1}, {"lng": 121.37312694322908, "lat": 37.471042595115264, "count": 1}, {"lng": 106.565444172252, "lat": 29.577301498729557, "count": 1}, {"lng": 116.39564503787867, "lat": 39.92998577808024, "count": 1}, {"lng": 114.01753578383853, "lat": 22.55375418096794, "count": 1}, {"lng": 116.51449977073432, "lat": 40.00853292475804, "count": 1}, {"lng": 113.01091498080108, "lat": 28.176207349208497, "count": 1}, {"lng": 120.12670833032874, "lat": 30.34264435275473, "count": 1}, {"lng": 104.07567789517816, "lat": 30.60784382742079, "count": 1}, {"lng": 113.94027590098632, "lat": 22.498676851767588, "count": 1}, {"lng": 121.4550356200023, "lat": 31.23375475799554, "count": 1}, {"lng": 121.1692709866278, "lat": 31.29607280415617, "count": 1}, {"lng": 113.94061218884032, "lat": 22.524102386038066, "count": 1}, {"lng": 121.42402383210188, "lat": 31.114758536769674, "count": 1}, {"lng": 117.10015479371246, "lat": 39.1094040115616, "count": 1}, {"lng": 113.93445156563794, "lat": 22.55193187458334, "count": 1}, {"lng": 121.38878795747307, "lat": 31.185449358684714, "count": 1}, {"lng": 113.92239677102029, "lat": 22.49857613498264, "count": 1}, {"lng": 130.28176460827774, "lat": 47.29882093826236, "count": 1}, {"lng": 118.82609075811112, "lat": 32.12419989567076, "count": 1}, {"lng": 121.62798263370645, "lat": 29.87475725640281, "count": 1}, {"lng": 113.3370176780441, "lat": 23.207080670208104, "count": 1}, {"lng": 116.37395605769647, "lat": 39.907872754371375, "count": 1}, {"lng": 117.27435050976496, "lat": 31.820338471424602, "count": 1}, {"lng": 121.46210137673688, "lat": 38.97590202821191, "count": 1}, {"lng": 113.99362948383494, "lat": 22.55305146125205, "count": 1}, {"lng": 121.85568460406292, "lat": 29.913788097394203, "count": 1}, {"lng": 119.28501100777433, "lat": 26.02696899592465, "count": 1}, {"lng": 121.42308159046941, "lat": 31.24664997419434, "count": 1}, {"lng": 114.16430066851858, "lat": 22.61090238806344, "count": 1}, {"lng": 117.06530157028173, "lat": 36.66082729152397, "count": 1}, {"lng": 108.92083123510837, "lat": 34.23825973195953, "count": 1}, {"lng": 113.63815388998478, "lat": 34.72851489253324, "count": 1}, {"lng": 106.75379853119536, "lat": 29.816264082426493, "count": 1}, {"lng": 119.34357001683108, "lat": 26.059259081923503, "count": 1}, {"lng": 121.39963266630156, "lat": 31.135078862931035, "count": 1}, {"lng": 118.93414514136268, "lat": 32.055230932681624, "count": 1}, {"lng": 120.27654155269619, "lat": 30.226338697707757, "count": 1}, {"lng": 112.61763787151179, "lat": 37.8211524680083, "count": 1}, {"lng": 113.15707353171973, "lat": 29.371214922637158, "count": 1}, {"lng": 119.95523160898706, "lat": 31.73966789455588, "count": 1}, {"lng": 117.11697410643696, "lat": 36.69380353061096, "count": 1}, {"lng": 113.65103895066048, "lat": 34.73149081391163, "count": 1}, {"lng": 108.95272550666382, "lat": 34.23957092791615, "count": 1}, {"lng": 114.34165496592293, "lat": 23.022704572374476, "count": 1}, {"lng": 121.45274260715415, "lat": 31.205236421026353, "count": 1}, {"lng": 111.6706518402865, "lat": 40.78204601408016, "count": 1}, {"lng": 87.58676528892127, "lat": 43.869862635302376, "count": 1}, {"lng": 108.96551816404154, "lat": 34.20260391458498, "count": 1}, {"lng": 112.41700406491036, "lat": 34.65956167335989, "count": 1}, {"lng": 120.25372578748907, "lat": 31.550464817765505, "count": 1}, {"lng": 106.5483702590906, "lat": 29.643020236195085, "count": 1}, {"lng": 114.11330296642846, "lat": 22.56157451296218, "count": 1}, {"lng": 113.63402415767396, "lat": 34.75998288895965, "count": 1}, {"lng": 118.79474057257245, "lat": 25.857384057085046, "count": 1}, {"lng": 113.93516686026445, "lat": 22.531263239084353, "count": 1}, {"lng": 118.19144948548666, "lat": 39.68743441981295, "count": 1}, {"lng": 120.038502409761, "lat": 30.24193244432979, "count": 1}, {"lng": 121.43201320500248, "lat": 31.209601012278668, "count": 1}, {"lng": 121.76225658111558, "lat": 31.123939626323132, "count": 1}, {"lng": 113.69961151983978, "lat": 34.797473963925555, "count": 1}, {"lng": 117.19236624776951, "lat": 39.09295026447234, "count": 1}, {"lng": 113.69961151983978, "lat": 34.797473963925555, "count": 1}, {"lng": 121.4334344141498, "lat": 31.188108805429298, "count": 1}, {"lng": 104.0585014961321, "lat": 30.567257389492283, "count": 1}, {"lng": 117.24931288648914, "lat": 31.90804983316124, "count": 1}, {"lng": 114.07024100749906, "lat": 22.632019499967324, "count": 1}, {"lng": 113.96007588121694, "lat": 22.574724998285564, "count": 1}, {"lng": 114.16430066851858, "lat": 22.61090238806344, "count": 1}, {"lng": 116.6318427380608, "lat": 40.28382757158249, "count": 1}, {"lng": 120.03500567741082, "lat": 30.2799330630425, "count": 1}, {"lng": 120.57803468102459, "lat": 31.290193313599186, "count": 1}, {"lng": 120.18033245799532, "lat": 35.96121827712384, "count": 1}, {"lng": 121.42336879850367, "lat": 31.208618699230012, "count": 1}, {"lng": 120.2221000131624, "lat": 30.25245625570453, "count": 1}, {"lng": 115.85640870788747, "lat": 28.66446265273061, "count": 1}, {"lng": 116.5313400139772, "lat": 39.92493357085623, "count": 1}, {"lng": 120.1283405900675, "lat": 30.336938084981444, "count": 1}, {"lng": 119.61549789087866, "lat": 39.94161540577454, "count": 1}, {"lng": 113.99404405182766, "lat": 22.55364310860051, "count": 1}, {"lng": 108.95329904868109, "lat": 34.335235342287746, "count": 1}, {"lng": 117.24931288648914, "lat": 31.90804983316124, "count": 1}, {"lng": 121.61102625143704, "lat": 38.90734848099469, "count": 1}, {"lng": 114.22852585141612, "lat": 30.60632249344839, "count": 1}, {"lng": 104.06938771026837, "lat": 30.574984062978587, "count": 1}, {"lng": 115.85640870788747, "lat": 28.66446265273061, "count": 1}, {"lng": 121.41904535649097, "lat": 37.5434766183229, "count": 1}, {"lng": 114.27380841529228, "lat": 30.63134214580807, "count": 1}, {"lng": 118.5797786758823, "lat": 24.823082426528764, "count": 1}, {"lng": 113.71166418368077, "lat": 34.75218884897648, "count": 1}, {"lng": 120.53569690274581, "lat": 31.237325577313797, "count": 1}, {"lng": 120.3425662486114, "lat": 31.59573539548938, "count": 1}, {"lng": 121.45274260715415, "lat": 31.205236421026353, "count": 1}, {"lng": 113.0248857838166, "lat": 28.186597644072684, "count": 1}, {"lng": 121.64691057328807, "lat": 38.92190964580627, "count": 1}, {"lng": 114.0443929689329, "lat": 22.640697269471136, "count": 1}, {"lng": 116.83109248044772, "lat": 38.29271555945555, "count": 1}, {"lng": 108.95319902415916, "lat": 34.325846015482696, "count": 1}, {"lng": 121.59050761403007, "lat": 29.865739469941015, "count": 1}, {"lng": 114.36921875593139, "lat": 30.530386248806426, "count": 1}, {"lng": 121.419040243336, "lat": 31.17641115197749, "count": 1}, {"lng": 118.7555692202706, "lat": 31.97600633427555, "count": 1}, {"lng": 121.45475555700204, "lat": 31.23538080348789, "count": 1}, {"lng": 121.4363787631707, "lat": 37.47001303926399, "count": 1}, {"lng": 116.5313400139772, "lat": 39.92493357085623, "count": 1}, {"lng": 113.93470078702704, "lat": 22.574521513169262, "count": 1}, {"lng": 114.14838269488702, "lat": 22.572592519240274, "count": 1}, {"lng": 117.22005577131762, "lat": 39.067700073917024, "count": 1}, {"lng": 104.06371463249815, "lat": 30.56408543935277, "count": 1}, {"lng": 114.39703154535563, "lat": 23.055835614566664, "count": 1}, {"lng": 113.99934186336763, "lat": 22.546109372381725, "count": 1}, {"lng": 121.59550909722726, "lat": 31.258779004939694, "count": 1}, {"lng": 114.0665552519081, "lat": 22.612458768012832, "count": 1}, {"lng": 120.44071501880103, "lat": 36.1161208841411, "count": 1}, {"lng": 121.51404765712337, "lat": 31.3087300785541, "count": 1}, {"lng": 114.23589010923078, "lat": 22.691293916384453, "count": 1}, {"lng": 116.3098294121543, "lat": 39.950107258225465, "count": 1}, {"lng": 116.35906001886545, "lat": 39.946317437048634, "count": 1}, {"lng": 104.17457490534913, "lat": 31.25597670105396, "count": 1}, {"lng": 121.49191854079479, "lat": 31.28249722898657, "count": 1}, {"lng": 109.06247725883752, "lat": 34.23841691761237, "count": 1}, {"lng": 116.4660869220713, "lat": 39.911570825193344, "count": 1}, {"lng": 121.42308159046941, "lat": 31.24664997419434, "count": 1}, {"lng": 113.60564265232371, "lat": 34.752846685287224, "count": 1}, {"lng": 113.88554674830057, "lat": 22.5697178541336, "count": 1}, {"lng": 116.52257242823364, "lat": 39.943483134725, "count": 1}, {"lng": 121.59695167526607, "lat": 38.91605248751932, "count": 1}, {"lng": 116.49983769737, "lat": 39.992456263404684, "count": 1}, {"lng": 113.04409774943008, "lat": 28.144816998816992, "count": 1}, {"lng": 113.26249470840185, "lat": 23.186558508455427, "count": 1}, {"lng": 121.46907567339423, "lat": 31.300152079136772, "count": 1}, {"lng": 121.5220170023026, "lat": 30.92608417878207, "count": 1}, {"lng": 120.05664278256756, "lat": 28.90623779471913, "count": 1}, {"lng": 116.99448777054016, "lat": 39.7206431243695, "count": 1}, {"lng": 114.02177387963991, "lat": 22.973900291767663, "count": 1}, {"lng": 104.05344452838234, "lat": 30.586377377101766, "count": 1}, {"lng": 121.53285726901035, "lat": 31.085387465362828, "count": 1}, {"lng": 119.28392926710485, "lat": 26.080176545127927, "count": 1}, {"lng": 121.26389122355391, "lat": 31.398573863707863, "count": 1}, {"lng": 107.2599515169292, "lat": 34.34694827307768, "count": 1}, {"lng": 121.49191854079479, "lat": 31.28249722898657, "count": 1}, {"lng": 121.42724276886291, "lat": 31.24054448458439, "count": 1}, {"lng": 116.56272652283468, "lat": 40.108706112792845, "count": 1}, {"lng": 113.82354078918955, "lat": 22.992961340701243, "count": 1}, {"lng": 116.49488003909097, "lat": 39.99034856238518, "count": 1}, {"lng": 116.29129197695548, "lat": 39.94167814661413, "count": 1}, {"lng": 113.3579155915229, "lat": 23.00679963823227, "count": 1}, {"lng": 114.11539871318256, "lat": 22.574360493571135, "count": 1}, {"lng": 121.26026599488867, "lat": 31.338280191779457, "count": 1}, {"lng": 113.73811744750807, "lat": 34.75201885789283, "count": 1}, {"lng": 104.07531199558123, "lat": 30.60742017462009, "count": 1}, {"lng": 113.73811744750807, "lat": 34.75201885789283, "count": 1}, {"lng": 113.18882375368804, "lat": 22.8390350024526, "count": 1}, {"lng": 118.73196303874019, "lat": 32.14637406439656, "count": 1}, {"lng": 113.96007588121694, "lat": 22.574724998285564, "count": 1}, {"lng": 113.33576048421212, "lat": 23.01273950206189, "count": 1}, {"lng": 114.03306011999572, "lat": 22.53412071622266, "count": 1}, {"lng": 120.12827582852836, "lat": 30.326740280040212, "count": 1}, {"lng": 108.92083123510837, "lat": 34.23825973195953, "count": 1}, {"lng": 112.99908552714922, "lat": 28.122261818827745, "count": 1}, {"lng": 121.26882526807599, "lat": 31.325067137357006, "count": 1}, {"lng": 121.38877605402675, "lat": 31.185473770704505, "count": 1}, {"lng": 121.78988883888515, "lat": 39.06594797667857, "count": 1}, {"lng": 113.34732953629492, "lat": 23.1306114948326, "count": 1}, {"lng": 113.74081092135935, "lat": 34.75292765022005, "count": 1}, {"lng": 104.02933037215382, "lat": 30.631707338108367, "count": 1}, {"lng": 113.34951507946437, "lat": 23.013352144286873, "count": 1}, {"lng": 114.3433261488271, "lat": 30.53764253043337, "count": 1}, {"lng": 113.54326470016674, "lat": 22.277245748723242, "count": 1}, {"lng": 117.30816081037997, "lat": 39.022538300671314, "count": 1}, {"lng": 104.06938771026837, "lat": 30.574984062978587, "count": 1}, {"lng": 117.30976411952875, "lat": 31.885753706742015, "count": 1}, {"lng": 118.81169802728105, "lat": 32.0468229807919, "count": 1}, {"lng": 119.26597101560687, "lat": 26.02943301894086, "count": 1}, {"lng": 112.87322038476755, "lat": 23.018303214913875, "count": 1}, {"lng": 113.99944903121494, "lat": 22.545236178270326, "count": 1}, {"lng": 121.35959307241575, "lat": 31.228015979073298, "count": 1}, {"lng": 116.57576734609258, "lat": 39.788042855213355, "count": 1}, {"lng": 108.92083123510837, "lat": 34.23825973195953, "count": 1}, {"lng": 121.51874444568568, "lat": 31.194494224283506, "count": 1}, {"lng": 118.74441443793941, "lat": 32.071611268816184, "count": 1}, {"lng": 121.64071537500075, "lat": 29.882481931162715, "count": 1}, {"lng": 113.7081456375012, "lat": 22.92335761589315, "count": 1}, {"lng": 121.59739017142279, "lat": 38.895213216874154, "count": 1}, {"lng": 113.98809840211682, "lat": 22.557010393263912, "count": 1}, {"lng": 113.33572654353505, "lat": 23.14652968668226, "count": 1}, {"lng": 113.93445156563794, "lat": 22.55193187458334, "count": 1}];


    /*底下的读取本地json貌似不被允许运行 貌似智能动态指定了
    $.getJSON("D:\\python\\whatJob\\Golangjinwei.json",function(data){
        $.each(data,function(i,info){
            points.push(info);
        })
    })*/



    if(!isSupportCanvas()){
    	alert('热力图目前只支持有canvas支持的浏览器,您所使用的浏览器不能使用热力图功能~')
    }
	//详细的参数,可以查看heatmap.js的文档 https://github.com/pa7/heatmap.js/blob/master/README.md
	//参数说明如下:
	/* visible 热力图是否显示,默认为true
     * opacity 热力的透明度,1-100
     * radius 势力图的每个点的半径大小
     * gradient  {JSON} 热力图的渐变区间 . gradient如下所示
     *	{
			.2:'rgb(0, 255, 255)',
			.5:'rgb(0, 110, 255)',
			.8:'rgb(100, 0, 255)'
		}
		其中 key 表示插值的位置, 0~1.
		    value 为颜色值.
     */
	heatmapOverlay = new BMapLib.HeatmapOverlay({"radius":20});
	map.addOverlay(heatmapOverlay);
	//这里max是我设置的，因为目前的权值 count都是1
	heatmapOverlay.setDataSet({data:points,max:2});
	//是否显示热力图
    function openHeatmap(){
        heatmapOverlay.show();
    }
	function closeHeatmap(){
        heatmapOverlay.hide();
    }
	closeHeatmap();
    function setGradient(){
     	/*格式如下所示:
		{
	  		0:'rgb(102, 255, 0)',
	 	 	.5:'rgb(255, 170, 0)',
		  	1:'rgb(255, 0, 0)'
		}*/
     	var gradient = {};
     	var colors = document.querySelectorAll("input[type='color']");
     	colors = [].slice.call(colors,0);
     	colors.forEach(function(ele){
			gradient[ele.getAttribute("data-key")] = ele.value;
     	});
        heatmapOverlay.setOptions({"gradient":gradient});
    }
	//判断浏览区是否支持canvas
    function isSupportCanvas(){
        var elem = document.createElement('canvas');
        return !!(elem.getContext && elem.getContext('2d'));
    }
</script>